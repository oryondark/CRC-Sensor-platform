{% load static %}
<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CRC Dashboard Web Service</title>
    <!--

    Template 2108 Dashboard

	http://www.tooplate.com/view/2108-dashboard

    -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600">
    <!-- https://fonts.google.com/specimen/Open+Sans -->
    <link rel="stylesheet" href="css/fontawesome.min.css">
    <!-- https://fontawesome.com/ -->
    <link rel="stylesheet" href="css/fullcalendar.min.css">
    <!-- https://fullcalendar.io/ -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- https://getbootstrap.com/ -->
    <link rel="stylesheet" href="css/tooplate.css">
    <!-- Chart js and Jquery -->
    <link rel="stylesheet" type="text/css" href="{% static 'polls/chart_style.css' %}">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <script type="text/javascript" src="{% static 'js/Chart.min.js' %}"></script>

  </head>
  <body>
      <h1>Bigdata Platform Scenario :: Open weather api with Spark SQL</h1>
      <div class='tempchart-container' style="position: relative; height:40vh; width:40vw">
        <canvas id="myChart"></canvas>
      </div>
      <script type="text/javascript">
          $.get('{% url "line_chart_json" %}', function(data) {
              var ctx = $("#myChart").get(0).getContext("2d");
              optionsLine = {
                scales: {
                  yAxes: [
                    {
                      scaleLabel: {
                        display: true,
                        labelString: "Hits"
                      }
                    }
                  ]
                }
              };
              // Set aspect ratio based on window width
              optionsLine.maintainAspectRatio = $(window).width() < width_threshold ? false : true;

              let tempChart = new Chart(ctx, {
                  type: 'line', data: data, option:optionsLine
              });
          });
      </script>
  </body>
</html>
